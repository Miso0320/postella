<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.postella.dao.QnaDao">

	<select id="selectByPgNo" parameterType="int" resultType="Qna">
		select * 
		from QNA 
		where pg_no = #{pg_no}
	</select>
	
	<select id="selectSelName" parameterType="int" resultType="String">
		select unique seller.sel_name
		from QNA,seller
		where seller.sel_no = (select unique sel_no
								from QNA, product
								where qna.pg_no = product.pg_no
								and qna.pg_no =#{pg_no})
	</select>
	
	<select id="selectQnaCnt" parameterType="int" resultType="int">
		SELECT count(*)
		FROM QNA
		WHERE pg_no = ${pg_no}
	</select>
	
	<select id="selectQnasByPage" parameterType="map" resultType="Qna">
	<![CDATA[
	  SELECT *
	  FROM (
	    SELECT t.*, ROWNUM AS RNUM
	    FROM (
            select * 
			from QNA 
			where pg_no = #{pg_no}
	    ) t
	    WHERE ROWNUM <= #{endRow}
	  )
	  WHERE RNUM >= #{startRow}
	  ]]>
	</select>
	
	<select id="selectPrdName" parameterType="int" resultType="String">
		select UNIQUE prd_name
		from QNA, product
		where QNA.prd_no = product.prd_no
		and QNA.prd_no = #{prd_no}
	</select>
	
</mapper>